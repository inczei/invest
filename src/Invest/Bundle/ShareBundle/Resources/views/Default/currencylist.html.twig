{% extends 'InvestShareBundle:Default:base.html.twig' %}
{% block content %}
<br><br><hr>
{% if message is defined and message|length %}<span class="message">Message : <b>{{ message|raw }}</b></span><br>{% endif %}
<br>
{% if data is defined and data|length %}
{% if data|length > 1 %}
<div class="listType">
<table>
	<tr>
		<th>Currency</th>
	{% for d in dates %}
		<th>{{ d }}</th>
	{% endfor %}
	</tr>
	{% for cur,v in data %}
	<tr>
		<th><a href="{{ path('invest_share_currency', {'currency': cur}) }}">{{ cur }}</a></th>
		{% for date,d in v %}
		<td align="right">{% if d.Rate != null %}{{ d.Rate|number_format(4) }}{% else %} - {% endif %}</td>
		{% endfor %}
	</tr>
	{% endfor %}
</table>
</div>
{% else %}
<div id="container" style="height: 600px"></div>
{% endif %}
<br>
{% endif %}
{% endblock %}
{% block additional_js %}
{% if data|length == 1 %}
<script>
$(document).ready(function(){
	$('#container').highcharts('StockChart', {
		title: {
			text: 'Currency Prices'
		},
		chart: {
			width: 800	
		},
            	
		rangeSelector: {
			selected: 1
		},

		legend: {
			enabled: true,
			align: 'center',
			verticalAlign: 'bottom'
		},

        series: [
 	        	{% set start1 = 0 %}
 	        	{% for k,v in data %}
 	        		{% if start1 == 0 %}{% else %},{% endif %}
 	        		{% set start1=start1+1 %}
 	            { name: '{{ k }}',
 	            data: [{% spaceless %}
 	            	{% set start = 0 %}
 	        		{% for d in v %}
 	        		{% if d != null %}
 	        			{% if start == 0 %}{% else %},{% endif %}
 	        			{% set start=start+1 %}
 	        		[Date.UTC({{ d.Date[0] }},
 	        		{{ d.Date[1]-1 }},
 	        		{{ d.Date[2] }},
 	        		{{ d.Date[3] }},
 	        		{{ d.Date[4] }}
 	        		),
 	        		{{ d.Rate }}]
 	        		{% endif %}
 	        		{% endfor %}
 	        	{% endspaceless %}]}
 	        {% endfor %}
 	        ],
	});
});
</script>
{% endif %}
{% if notes is defined and notes|length %}
<hr>
<div class="notes">{{ notes|nl2br }}<div>
{% endif %}
{% endblock %}